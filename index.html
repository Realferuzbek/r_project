<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FROM YOBO TO GONGJUNIM</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- T1 Elegant Serif -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#ffd1e6;      /* light pink */
    --bg2:#cbb7ff;      /* lavender purple */
    --text:#ffffff;
    --muted: rgba(255,255,255,.7);
    --spot: radial-gradient(650px 400px at 50% 40%, rgba(255,255,255,.20), rgba(255,255,255,0) 60%);
    --heart:#ff8fb4;    /* soft pink heart */
    --heart-glow: rgba(255,143,180,.55);
    --btn-from:#ff8ad6;
    --btn-to:#a07aff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 900px at 20% 110%, rgba(255,255,255,.25), transparent 60%),
                linear-gradient(180deg, var(--bg1), var(--bg2));
    font-family: "Playfair Display", Georgia, serif;
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:hidden;
  }

  /* Uppercase + letter spacing for the whole site */
  .caps { text-transform: uppercase; letter-spacing: .08em; }

  /* Hearts field */
  .hearts{
    position:fixed; inset:0; overflow:hidden; pointer-events:none;
  }
  .heart{
    position:absolute;
    bottom:-60px;
    width:24px; height:24px;
    transform-origin:center;
    filter: drop-shadow(0 0 6px var(--heart-glow));
    opacity:.9;
  }
  /* CSS heart shape */
  .heart::before, .heart::after{
    content:"";
    position:absolute;
    width:12px; height:18px;
    background: var(--heart);
    border-radius:12px 12px 0 0;
    top:2px; left:6px;
    transform-origin:bottom center;
  }
  .heart::after{
    left:auto; right:6px;
  }
  .heart{
    transform: rotate(45deg) scale(1) translateZ(0);
  }
  .heart::before{ transform: rotate(-45deg); }
  .heart::after { transform: rotate(45deg); }

  @keyframes rise {
    0%   { transform: translateY(0) scale(1, 1) rotate(45deg); opacity: 0; }
    8%   { opacity: .95; }
    70%  { transform: translateY(-45vh) scale(1, 1.08) rotate(45deg); }
    100% { transform: translateY(-47vh) scale(1, 1.05) rotate(45deg); opacity:.0; }
  }

  /* Center stage containers */
  .stage{
    position:relative;
    height:100vh; width:100vw;
    display:grid; place-items:center;
    text-align:center;
    padding:20px;
  }
  .panel{
    max-width: 860px;
    width:min(92vw, 860px);
    padding: clamp(18px, 4vw, 36px);
    border-radius: 24px;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.20);
    box-shadow: 0 20px 80px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.25);
    backdrop-filter: blur(6px);
  }
  .spotlight{
    position:relative;
  }
  .spotlight::before{
    content:"";
    position:absolute; inset:-8vh -6vw -8vh -6vw;
    background: var(--spot);
    z-index:-1;
  }

  h1,h2,p{ margin:0; }
  .welcome-title{
    font-weight:900;
    font-size: clamp(26px, 6vw, 54px);
    line-height:1.15;
  }
  .welcome-sub{
    margin-top: .6rem;
    font-weight:700;
    font-size: clamp(14px, 2.7vw, 18px);
    color: var(--muted);
  }

  .main-text, .ending-text{
    font-weight:700;
    font-size: clamp(16px, 3.4vw, 22px);
    line-height: 1.55;
    white-space: pre-wrap;
  }
  .ending-text{
    font-size: clamp(16px, 3.2vw, 20px);
    font-weight:900;
  }

  .hidden{ display:none; }
  .fade-in{ animation: fadeIn .7s ease forwards; }
  .fade-out{ animation: fadeOut .6s ease forwards; }

  @keyframes fadeIn{ from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none} }
  @keyframes fadeOut{ from{opacity:1} to{opacity:0} }

  /* Typewriter caret */
  .caret{
    display:inline-block; width:.6ch;
    border-right: 2px solid rgba(255,255,255,.8);
    transform: translateY(.1em);
    margin-left:.1ch;
    animation: blink 1s step-end infinite;
  }
  @keyframes blink { 50%{ border-color: transparent; } }

  /* Ending button */
  .cta{
    margin-top: clamp(12px, 2.8vw, 18px);
    display:inline-block;
    text-decoration:none;
    color: #1b0b26;
    font-weight:900;
    letter-spacing:.08em;
    background: linear-gradient(135deg, var(--btn-from), var(--btn-to));
    padding: 14px 22px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.35);
    box-shadow: 0 10px 30px rgba(160,122,255,.35), inset 0 1px 0 rgba(255,255,255,.6);
    transform: translateZ(0);
  }
  .cta:hover{ filter: brightness(1.06); }
  .cta:active{ transform: scale(.98); }

  /* Tiny audio chip (only shown if autoplay blocked) */
  .audio-chip{
    position: fixed; right: 14px; bottom: 14px;
    background: rgba(255,255,255,.2);
    border:1px solid rgba(255,255,255,.4);
    color:#1b0b26;
    backdrop-filter: blur(6px);
    padding: 8px 12px;
    border-radius: 999px;
    font-weight:900;
    letter-spacing:.08em;
    cursor:pointer;
    box-shadow: 0 6px 22px rgba(0,0,0,.18);
    display:none;
    user-select:none;
  }
  .audio-chip.show{ display:block; }
</style>
</head>
<body>

<!-- Hearts layer -->
<div class="hearts" id="hearts" aria-hidden="true"></div>

<!-- Stages -->
<main class="stage">

  <!-- WELCOME (with spotlight) -->
  <section id="welcome" class="panel spotlight">
    <h1 id="welcomeText" class="caps welcome-title" aria-live="polite"></h1>
    <p class="caps welcome-sub"> </p>
  </section>

  <!-- MAIN LETTER -->
  <section id="main" class="panel hidden">
    <div id="mainText" class="caps main-text" aria-live="polite"></div>
  </section>

  <!-- ENDING (with spotlight) -->
  <section id="ending" class="panel spotlight hidden">
    <div id="endingText" class="caps ending-text" aria-live="polite"></div>
    <div id="endingBtnWrap" class="hidden">
      <a class="caps cta" id="backBtn" href="https://www.instagram.com/realferuzbek" target="_blank" rel="noopener noreferrer">BACK TO YOBO</a>
    </div>
  </section>
</main>

<!-- Audio -->
<audio id="bgm" src="die_with_a_smile.mp3" preload="auto" playsinline loop crossorigin="anonymous"></audio>
<div id="audioChip" class="audio-chip caps">TAP TO PLAY</div>

<script>
/* ---------------- Hearts generator ---------------- */
(function(){
  const field = document.getElementById('hearts');
  const HEART_COUNT = 20; // ~20 as requested
  const rnd = (min,max)=> Math.random()*(max-min)+min;

  for(let i=0;i<HEART_COUNT;i++){
    const h = document.createElement('div');
    h.className = 'heart';
    const size = rnd(18, 30); // gentle sizes
    h.style.width = size + 'px';
    h.style.height = size + 'px';
    h.style.left = rnd(2, 98) + 'vw';
    h.style.animation = `rise ${rnd(13,19).toFixed(2)}s ${rnd(0,10).toFixed(2)}s linear infinite`;
    h.style.opacity = rnd(0.75, 1).toFixed(2);
    h.style.filter = `drop-shadow(0 0 ${rnd(4,8).toFixed(1)}px rgba(255,143,180,.5))`;
    field.appendChild(h);
  }
})();

/* ---------------- Typewriter ---------------- */
async function typeLines(el, lines, speed=50, linePause=450){
  el.innerHTML = '';
  const caret = document.createElement('span');
  caret.className = 'caret';
  el.appendChild(caret);
  for(let idx=0; idx<lines.length; idx++){
    const line = lines[idx];
    for(let j=0; j<line.length; j++){
      const ch = line[j];
      const node = document.createTextNode(ch);
      el.insertBefore(node, caret);
      await new Promise(r=>setTimeout(r, speed));
    }
    if(idx !== lines.length-1){
      el.insertBefore(document.createElement('br'), caret);
      await new Promise(r=>setTimeout(r, linePause));
    }
  }
  caret.remove();
}

/* ---------------- Flow ---------------- */
const welcomeEl = document.getElementById('welcome');
const welcomeText = document.getElementById('welcomeText');
const mainEl = document.getElementById('main');
const mainText = document.getElementById('mainText');
const endingEl = document.getElementById('ending');
const endingText = document.getElementById('endingText');
const endingBtnWrap = document.getElementById('endingBtnWrap');

const WELCOME_LINES = [
  "FROM YOBO TO GONGJUNIM",
  "THIS LITTLE PAGE IS ONLY FOR YOU"
];

const MAIN_LINES = [
  "SEPTEMBER 16, 2025",
  "",
  "GONGJUNIM,",
  "I ADORE YOU, SWEETHEART.",
  "",
  "I KNOW HOW MUCH YOU LIKE TO HEAR THAT — BUT I DON’T ONLY WRITE IT BECAUSE YOU LIKE IT — I WRITE IT BECAUSE IT MAKES ME WARM ALL OVER INSIDE TO WRITE IT TO YOU.",
  "",
  "IT IS SUCH A TERRIBLY LONG TIME SINCE I LAST WROTE TO YOU.",
  "I WANT TO TELL YOU I LOVE YOU. I WANT TO LOVE YOU. I ALWAYS WILL LOVE YOU.",
  "I FIND IT HARD TO UNDERSTAND IN MY MIND WHAT IT MEANS TO LOVE YOU AFTER WE FIGHT — BUT I STILL WANT TO COMFORT AND TAKE CARE OF YOU — AND I WANT YOU TO LOVE ME AND CARE FOR ME. I WANT TO HAVE PROBLEMS TO DISCUSS WITH YOU — I WANT TO DO LITTLE PROJECTS WITH YOU. I NEVER THOUGHT UNTIL JUST NOW THAT WE CAN DO THAT. WHAT SHOULD WE DO. WE STARTED TO LEARN TO TALK WITHOUT FIGHT— OR LEARN ARABIC — OR DOING ONLINE SHOP. CAN’T I DO SOMETHING NOW? NO. I AM ALONE WITHOUT YOU AND YOU WERE THE “IDEAL-GIRL” AND GENERAL INSTIGATOR OF ALL OUR WILD ADVENTURES.",
  "",
  "WHEN YOU WERE SICK YOU WORRIED BECAUSE YOU COULD NOT GIVE ME SOMETHING THAT YOU WANTED TO AND THOUGHT I NEEDED. YOU NEEDN’T HAVE WORRIED. JUST AS I TOLD YOU THEN THERE WAS NO REAL NEED BECAUSE I LOVED YOU IN SO MANY WAYS SO MUCH.",
  "",
  "MY DARLING PRINCESS, I DO ADORE YOU.",
  "I LOVE MY WIFE. I LOVE MY GONGJUNIM.",
  "YOBO."
];

const ENDING_LINES = [
  "OUR NEXT CHAPTER STARTS UNDER THE STARS.",
  "WITH ALL MY LOVE, YOBO."
];

async function runFlow(){
  // Welcome
  welcomeEl.classList.remove('hidden');
  await typeLines(welcomeText, WELCOME_LINES, 50, 400);
  await new Promise(r=>setTimeout(r, 1800));
  welcomeEl.classList.add('fade-out');
  await new Promise(r=>setTimeout(r, 600));
  welcomeEl.classList.add('hidden');

  // Main
  mainEl.classList.remove('hidden');
  mainEl.classList.add('fade-in');
  await typeLines(mainText, MAIN_LINES, 48, 380);
  await new Promise(r=>setTimeout(r, 900));

  // Ending
  endingEl.classList.remove('hidden');
  endingEl.classList.add('fade-in');
  await typeLines(endingText, ENDING_LINES, 50, 420);
  endingBtnWrap.classList.remove('hidden');
}

document.addEventListener('DOMContentLoaded', runFlow);

/* ---------------- Audio autoplay (desktop) + mobile gesture fallback ---------------- */
const audio = document.getElementById('bgm');
const chip  = document.getElementById('audioChip');
audio.volume = 0.45;

// Attempt autoplay ASAP
async function tryAutoplay(){
  try{
    await audio.play();
    chip.classList.remove('show'); // success
  }catch(e){
    chip.classList.add('show');    // likely blocked on mobile
  }
}
document.addEventListener('DOMContentLoaded', tryAutoplay);

// Start on ANY user gesture (first tap/click/keydown)
const startOnGesture = async () => {
  if (audio.paused) {
    try {
      await audio.play();
      chip.classList.remove('show');
      removeGestureListeners();
    } catch(e) {}
  }
};
function addGestureListeners(){
  ['pointerdown','touchend','click','keydown'].forEach(ev=>{
    window.addEventListener(ev, startOnGesture, { passive:true });
  });
}
function removeGestureListeners(){
  ['pointerdown','touchend','click','keydown'].forEach(ev=>{
    window.removeEventListener(ev, startOnGesture);
  });
}
addGestureListeners();

// If tab becomes visible again (iOS restores), retry
document.addEventListener('visibilitychange', ()=>{
  if(!document.hidden && audio.paused) tryAutoplay();
});

// Chip manual start
chip.addEventListener('click', startOnGesture);
</script>
</body>
</html>
